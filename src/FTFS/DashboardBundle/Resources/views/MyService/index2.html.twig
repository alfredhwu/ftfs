{% extends "FTFSDashboardBundle::layout.html.twig" %}

{% block body_content %}
{% include 'FTFSDashboardBundle:MyService:crud_box.html.twig' %}
{% endblock %}

{% block javascript %}
{{ parent() }}
<script>
    $(document).ready(function () {
        var href = "{{ path('ftfs_dashboardbundle_myservice_index') }}";

        var type = {{ app.request.query.get('type') | default(0) }};
        $('select#ticket-filter').val(type);
        $('select#ticket-filter').change(function() {
            var loc = document.location;
            var search = loc.search;
            if(!search.match(/type=[a-zA-Z0-9_]*/)) {
                search += ("" == search) ? '?' : "&";
                search += 'type=type';
            }
            search = search.replace(/type=[a-zA-Z0-9_]*/, 'type='+$(this).val());
            //alert(href + search);
            window.location.replace(href+search);
            /*
            $.post(href+search, function(data) { 
                $('div#crud-box-content').html(data);
            });
            */
        });

        $('div.pagination ul li a').click(function(e) { 
            e.preventDefault();
        });
    });
</script>
{% endblock %}
